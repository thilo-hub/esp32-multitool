<!DOCTYPE html>
<html>
<head>
<title>Buttons</title>
</head>
<style>
td {
        background: #dddddd; 
        frame:red;
        text-align: center;
        margin: auto;
font-size: 40px;
        
}
td.lft {
        background: #dddddd; 
        frame:red;
        width: 40%;
        Xtext-align: left;
        #border: 4px solid green;


}
td.rgt {
        background: #dddddd; 
        width: 40%;
        Xtext-align: right;
        #border: 4px solid red;
}
.blinkgreen {
  animation-name: greenflash;
  animation-duration: 0.5s;
}

@keyframes greenflash {
  from {background-color: #dddddd;}
  50%  {background-color: green;}
  to {background-color: #dddddd;}
}

.blinkred {
  animation-name: redflash;
  animation-duration: 0.5s;
}

@keyframes redflash {
  from {background-color: #dddddd;}
  50%  {background-color: red;}
  to {background-color: #dddddd;}
}

</style>
<script>

function dobtn(params)
    {
    var url = "/send";
    if ( params.match(".off") ) 
    {
	cl="blinkred";
    } else {
	cl="blinkgreen"
    }
    var xhr = new XMLHttpRequest();
    var el = event.target.parentElement;

    xhr.responseType = "text";
    xhr.onload = () => 
    {
	if (xhr.readyState === xhr.DONE) 
	{
	    if (xhr.status === 200 && xhr.responseText == "OK" ) 
	    {
		el.setAttribute("class",cl);
	    }
	}
    };
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("buttons/" + params);
}
function strt() {
    var url = "/buttons";
    var xhr = new XMLHttpRequest();
    xhr.responseType = "text";
    xhr.onload = () => 
    {
	if (xhr.readyState === xhr.DONE && xhr.status === 200 ) 
	{
		//TODO: make buttons dynamic...
	    document.getElementById("demo").innerHTML += xhr.responseText;
	    xhr.responseText.split("\n").forEach.sort()( function(i) { 
		if ( i.length != 0 )
			console.log("T:"+ i)
		})
	}
    };

    xhr.open("GET", url, true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("");
}
strt();

</script>
<body>

<h1>Button Switch</h1>
<p id="demo">----</p>

<table id="tab" width="100%">
<tr><td class="lft"><p onmousedown="dobtn('a.on')">&#x2705;</p></td><td>A</td><td class="rgt" ><p onmousedown="dobtn('a.off')" >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('b.on')">&#x2705;</p></td><td>B</td><td class="rgt" ><p onmousedown="dobtn('b.off')" >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('c.on')">&#x2705;</p></td><td>C</td><td class="rgt" ><p onmousedown="dobtn('c.off')"  >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('d.on')">&#x2705;</p></td><td>D</td><td class="rgt" ><p onmousedown="dobtn('d.off')" >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('oa.on')">&#x2705;</p></td><td>OA</td><td class="rgt" ><p onmousedown="dobtn('oa.off')" >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('ob.on')">&#x2705;</p></td><td>OB</td><td class="rgt" ><p onmousedown="dobtn('ob.off')" >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('oc.on')">&#x2705;</p></td><td>OC</td><td class="rgt" ><p onmousedown="dobtn('oc.off')"  >&#x274C </p></td></tr>
<tr><td class="lft"><p onmousedown="dobtn('od.on')">&#x2705;</p></td><td>OD</td><td class="rgt" ><p onmousedown="dobtn('od.off')" >&#x274C </p></td></tr>

</table>

</body>
</html>

